/**
 * @fileoverview
 * ğŸ”’ Secure Talk â€“ Firestore Rules (Level 1: Adjusted for Username Check)
 *
 * âœ… Purpose:
 *   These rules are designed for local development and prototype testing only.
 *   All authenticated users can read and write any data in the Firestore database.
 *   Additionally, unauthenticated users are allowed to check for username availability.
 *
 * âš ï¸ Warning:
 *   Do NOT use this ruleset in production â€” it exposes all data to any signed-in user except for username availability.
 *   Once testing is complete, replace it with principle-based rules.
 *
 * Data Structure:
 *   The database contains collections for `users`, `usernames`, `chats`, `groups`, and a `team` collection for app developers.
 *   User-specific data is nested under `/users/{userId}`.
 *   Chat messages are stored in subcollections under `/chats/{chatId}` and `/groups/{groupId}`.
 *
 * Key Security Decisions:
 *   - Allows unauthenticated read access for username availability checks, as per the user's request.
 */

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // ğŸ”¹ Allow all authenticated users to read and write anywhere
    match /{document=**} {
      allow read, write: if request.auth != null;
    }

    // ğŸ”¹ Allow unauthenticated users to check username availability
    match /usernames/{username} {
      allow get: if true;
    }
  }
}